<%include file="header.html"/>

<div style="width:80%">
    <div><canvas id="LightChart"></canvas></div>
    <div><canvas id="TemperatureChart"></canvas></div>
</div>

<%
rs = Records[::-1]
Labels = str(["{0}".format(r.Ts) for r in rs])
Lights = str([r.Light for r in rs])
Temperatures = str([r.Temperature for r in rs])
%>
<script>
    var LightChartData = {
        labels : ${Labels},
        datasets : [
            {
                label: "Light",
                fillColor : "rgba(220,220,220,0.2)",
                strokeColor : "rgba(220,220,220,1)",
                pointColor : "rgba(220,220,220,1)",
                pointStrokeColor : "#fff",
                pointHighlightFill : "#fff",
                pointHighlightStroke : "rgba(220,220,220,1)",
                data : ${Lights}
            },
        ]

    }


    var TemperatureChartData = {
        labels : ${Labels},
        datasets : [
            {
                label: "Temperature",
                fillColor : "rgba(151,187,205,0.2)",
                strokeColor : "rgba(151,187,205,1)",
                pointColor : "rgba(151,187,205,1)",
                pointStrokeColor : "#fff",
                pointHighlightFill : "#fff",
                pointHighlightStroke : "rgba(151,187,205,1)",
                data : ${Temperatures}
            },
        ]

    }


window.onload = function(){
    var light_chart_ctx = document.getElementById("LightChart").getContext("2d");
    window.myLine = new Chart(light_chart_ctx).Line(LightChartData, {
        responsive: true
    });

    var temperature_chart_ctx = document.getElementById("TemperatureChart").getContext("2d");
    window.myLine = new Chart(temperature_chart_ctx).Line(TemperatureChartData, {
        responsive: true
    });

}


</script>


%if False :
    <div class="LineTable">
    <table>
    <tr>
        <td width="160"> TimeStamp </td>
        <td width="100"> Light </td>
        <td width="100"> Temperature </td>
    </tr>

    %for r in Records :
    <tr>
        <td> ${r.Ts} </td>
        <td> ${r.Light} </td>
        <td> ${r.Temperature} </td>
    </tr>
    %endfor
    </table>
    </div>
%endif
<%include file="footer.html"/>
